<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dsbath.admin.model.mapper.AdminMapper">

	<!-- 관리자 로그인 조회 -->
	<select id="selectOfLogin" parameterType="admin" resultType="admin">
		SELECT
			*
		  FROM Admin
		 WHERE AdminId = #{adminId}
	</select>
	
	<!-- 관리자 비밀번호 update -->
	<select id="updateOfPassword" parameterType="admin">
		UPDATE Admin
		   
		   SET
		   	Password = #{password}
		   	
		 WHERE AdminId = #{adminId}
	</select>
	
	<!-- 관리자 아이디 중복확인 -->
	<select id="adminIdChecked" parameterType="admin" resultType="admin">
		SELECT
			AdminId
		  FROM Admin
		 WHERE AdminId = #{adminId}
	</select>
	
	<!-- 관리자 등록 -->
	<insert id="insert" parameterType="admin">
		INSERT INTO Admin
		(
			AdminName,
			AdminId,
			Password,
			Address,
			Role
		)
		VALUES
		(
			#{adminName},
			#{adminId},
			#{password},
			#{address},
			#{role}
		)
	</insert>
	
	<!-- 관리자 목록 조회 -->
	<select id="select" parameterType="com.dsbath.admin.model.dto.PagingDTO" resultType="admin">
		SELECT
			AdminIdx,
			AdminName,
			AdminId,
			Address,
			Role,
			CreateDate,
			UpdateDate
			
		  FROM Admin
		 
		<!-- order by -->
		<if test='@com.dsbath.admin.etc.util.StringUtil@isNotEmpty(sort) and @com.dsbath.admin.etc.util.StringUtil@isNotEmpty(sortType)'>
		 	ORDER BY 
		 	
			<choose>
			 	<when test='"adminId".equals(sortType)'>
			 		AdminId
				</when>
			 	<when test='"adminName".equals(sortType)'>
			 		AdminName
				</when>
			 	<when test='"address".equals(sortType)'>
			 		Address
				</when>
			 	<when test='"createDate".equals(sortType)'>
			 		CreateDate
				</when>
			</choose>
			 
			<choose>
				<when test='"asc".equals(sort)'>
					ASC
				</when>
				<when test='"desc".equals(sort)'>
					DESC
				</when>
			</choose>
		</if>
		
		<!-- paging -->
		LIMIT #{page}, #{limit}
	</select>
	
	<!-- 관리자 Total Count 조회 -->
	<select id="selectOfTotalCount" parameterType="com.dsbath.admin.model.dto.PagingDTO" resultType="long">
		SELECT
			COUNT(AdminIdx)
		  FROM Admin
	</select>
</mapper>